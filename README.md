# Code Review Application with Streaming Responses

This application provides real-time code review using Google's Gemini AI with streaming responses for a better user experience.

## Features

- **Streaming Responses**: Real-time display of AI-generated code reviews as they are generated
- **File Upload**: Upload code files for review (up to 2MB)
- **Paste Code**: Directly paste code for instant review
- **Modern UI**: Clean, responsive interface with dark/light theme support
- **Error Handling**: Robust error handling with timeout and connection management

## Prerequisites

- Node.js (v16 or higher)
- npm or yarn
- Google Gemini API key

## Setup

### Backend Setup

1. Navigate to the backend directory:
   ```bash
   cd backend
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Update the API key in `backend/ai.js` with your Google Gemini API key:
   ```javascript
   export const ai = new GoogleGenAI({
       apiKey: "YOUR_API_KEY_HERE",
   });
   ```

4. Start the backend server:
   ```bash
   npm start
   ```

The backend will run on `http://localhost:3000`

### Frontend Setup

1. Navigate to the frontend directory:
   ```bash
   cd frontend
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Start the development server:
   ```bash
   npm run dev
   ```

The frontend will run on `http://localhost:5173` (or another port if 5173 is occupied)

## How It Works

### Streaming Implementation

The application uses **Server-Sent Events (SSE)** to stream responses from the backend to the frontend:

1. **Backend**: Uses `generateContentStream()` from Google Gemini API to get streaming responses
2. **Frontend**: Uses `fetch()` with `ReadableStream` to handle streaming data
3. **UI**: Displays text as it arrives with a blinking cursor indicator

### Key Components

- **Backend (`backend/index.js`)**: Handles streaming API calls and SSE responses
- **Frontend (`frontend/src/App.jsx`)**: Manages streaming data and real-time UI updates
- **Error Handling**: Comprehensive error handling for timeouts, connection issues, and API errors

## API Endpoints

- `POST /review`: Streams code review responses
  - Request body: `{ "code": "your code here" }`
  - Response: Server-Sent Events stream with review chunks

## Usage

1. Start both the backend and frontend servers
2. Open the frontend application in your browser
3. Either:
   - Upload a code file (click the upload button)
   - Paste code directly into the input field
4. Watch the AI review stream in real-time as it's generated
5. The review includes suggestions and corrected code

## Error Handling

The application includes robust error handling for:
- Network timeouts (30-second limit)
- Connection failures
- Invalid API responses
- Client disconnections
- Large file uploads

## Browser Support

- Modern browsers with support for:
  - Fetch API with ReadableStream
  - Server-Sent Events
  - ES6+ features

## Development

### Project Structure

```
project/
├── backend/
│   ├── index.js          # Main server with streaming endpoints
│   ├── ai.js             # Google Gemini AI configuration
│   ├── prompt.js         # AI prompt template
│   └── package.json
├── frontend/
│   ├── src/
│   │   ├── App.jsx       # Main React component with streaming logic
│   │   ├── App.css       # Styling including streaming indicators
│   │   └── main.jsx      # React entry point
│   └── package.json
└── README.md
```

### Key Features of Streaming Implementation

1. **Real-time Updates**: Text appears as it's generated by the AI
2. **Visual Feedback**: Blinking cursor indicates active streaming
3. **Error Recovery**: Graceful handling of connection issues
4. **Performance**: Efficient chunked data transfer
5. **User Experience**: No waiting for complete responses

## Troubleshooting

- **Connection Issues**: Ensure the backend server is running on port 3000
- **API Errors**: Verify your Google Gemini API key is correct and has sufficient quota
- **Streaming Issues**: Check browser console for any JavaScript errors
- **Timeout Issues**: Large code files may take longer to process

## License

This project is for educational and development purposes.
